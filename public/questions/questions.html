<!doctype html>
<html lang="hr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Jednostavan Kviz - Konstruktor</title>

    <style>
        :root {
            font-family: Inter, system-ui, Arial;
            --primary-color: #1C6BA0;
            --accent-color: #E62727;
            --background-gradient: linear-gradient(90deg, #e2e2e2, #c9d6ff);
            --card-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            background: var(--background-gradient);
            box-sizing: border-box;
        }

        .timer {
            position: absolute;
            top: 20px;
            left: 30px;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 16px;
            border-radius: 12px;
            font-family: monospace;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            width: 80px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 100;
        }

        .points {
            position: absolute;
            top: 20px;
            right: 30px;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 16px;
            border-radius: 12px;
            font-family: monospace;
            font-weight: bold;
            font-size: 1.2rem;
            text-align: center;
            min-width: 80px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 100;
        }

        h1 {
            margin: 0 0 20px 0;
            font-size: 36px;
            text-align: center;
            color: var(--primary-color);
            width: 100%;
        }

        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            padding: 40px;
            max-width: 1000px;
            width: 100%;
            border-radius: 20px;
            background: white;
            box-shadow: var(--card-shadow);
            box-sizing: border-box;
        }

       
        .card-content {
            display: flex;
            flex-direction: row;
            align-items: stretch;
            gap: 30px;
            width: 100%;
        }

        .image-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .image-container img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 20px;
            object-fit: contain;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .quiz-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .question-block {
            background: var(--primary-color);
            color: white;
            border-radius: 14px;
            min-height: 100px;
            margin-bottom: 20px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            box-sizing: border-box;
        }

        .question {
            font-size: 25px;
            font-weight: bold;
            margin: 0;
            text-align: center;
        }

        .answers {
            display: flex;
            flex-direction: column;
            gap: 12px;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        .answer {
            padding: 14px 20px;
            border-radius: 10px;
            cursor: pointer;
            user-select: none;
            text-align: center;
            transition: all .2s ease;
            background: white;
            width: 100%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
            border: 1px solid #e5e7eb;
        }

        .answer:hover {
            background: #f3f4f6;
            transform: translateY(-2px);
        }

        .answer.selected {
            border: 2px solid #2563eb;
            background: #eff6ff;
            font-weight: 500;
        }

        .answer.correct {
            border: 2px solid #16a34a;
            background: #ecfdf5;
        }

        .answer.wrong {
            border: 2px solid #dc2626;
            background: #fff1f2;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        button {
            padding: 12px 24px;
            border-radius: 10px;
            border: 0;
            background: var(--primary-color);
            color: white;
            cursor: pointer;
            font-size: 15px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        button:not(.secondary):hover {
            background-color: var(--accent-color);
            transform: translateY(-2px);
        }

        button.secondary {
            background: transparent;
            color: #111827;
            border: 1px solid #e5e7eb;
        }

        button.secondary:hover {
            background: #f3f4f6;
        }

        .result {
            padding: 20px;
            border-radius: 14px;
            background: #1C6BA0;
            color: white;
            text-align: center;
            margin-top: 20px;
            font-size: 18px;
            font-weight: 500;
        }

        /* Tablet responsiveness */
        @media (max-width: 768px) {
            .card-content {
                flex-direction: column;
                padding: 0;
                gap: 25px;
            }

            .image-container img {
                max-height: 200px;
            }

            .question {
                font-size: 22px;
            }

            .question-block {
                min-height: 160px;
            }

            .answer {
                padding: 12px 16px;
            }

            .controls {
                max-width: 100%;
            }
        }

        .progress {
            text-align: center;
            padding: 15px;
        }

        /* Mobile responsiveness */
        @media (max-width: 480px) {

            .timer,
            .points {
                position: static;
                margin-left: 20px;
                margin: 10px;
                width: auto;
                display: inline-block;
            }

            .card-header {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .meta-row {
                display: flex;
                justify-content: center;
                gap: 20px;
            }
        }
    </style>
</head>

<body>
    <div class="card" id="app">
        <h1>Quiz Beginner</h1>
        <div class="card-content">
            <div class="image-container">
                <img id="question-image" src="" alt="Slika pitanja" />
            </div>
            <div class="quiz-content" id="quiz-root">
            </div>
        </div>
    </div>

    <script>
        class Quiz {
            constructor(container, questions = [], opts = {}) {
                this.container = container;
                this.questions = questions;
                this.index = 0;
                this.score = 0;
                this.userAnswers = new Array(questions.length).fill(null);
                this.showCorrectOnSubmit = opts.showCorrectOnSubmit ?? true;
                this.render();
            }

            render() {
                this.container.innerHTML = `
          <div class="meta-block">
            <div class="progress" id="progress"></div>
            <div class="timer" id="timer">00:30</div>
            <div class="points" id="points">Score: 0</div>
            <div class="question-block">
              <div class="question" id="question"></div>
            </div>
          </div>
          <div class="answers" id="answers"></div>
          <div class="controls">
            <div>
              <button id="prevBtn" class="secondary">Previous</button>
              <button id="nextBtn">Next</button>
            </div>
            <div class="progress" id="scoreDisplay"></div>
          </div>
          <div id="resultArea"></div>
        `;

                this.$question = this.container.querySelector('#question');
                this.$answers = this.container.querySelector('#answers');
                this.$progress = this.container.querySelector('#progress');
                this.$scoreDisplay = this.container.querySelector('#scoreDisplay');
                this.$prevBtn = this.container.querySelector('#prevBtn');
                this.$nextBtn = this.container.querySelector('#nextBtn');
                this.$resultArea = this.container.querySelector('#resultArea');
                this.timerDuration = 30;
                this.timer = null;
                this.timerElement = this.container.querySelector('#timer');
                this.$points = this.container.querySelector('#points');

                this.$prevBtn.addEventListener('click', () => this.prev());
                this.$nextBtn.addEventListener('click', () => this.next());

                window.addEventListener('keydown', (e) => {
                    if (e.key === 'ArrowRight') this.next();
                    if (e.key === 'ArrowLeft') this.prev();
                });

                this.showQuestion();
            }

            startTimer() {
                clearInterval(this.timer);
                let timeLeft = this.timerDuration;
                this.updateTimerDisplay(timeLeft);

                this.timer = setInterval(() => {
                    timeLeft--;
                    this.updateTimerDisplay(timeLeft);

                    if (timeLeft <= 0) {
                        clearInterval(this.timer);
                        this.next();
                    }
                }, 1000);
            }

            updateTimerDisplay(seconds) {
                const mins = String(Math.floor(seconds / 60)).padStart(2, '0');
                const secs = String(seconds % 60).padStart(2, '0');
                this.timerElement.textContent = `${mins}:${secs}`;
            }

            showQuestion() {
                const q = this.questions[this.index];
                this.$question.textContent = `${this.index + 1}. ${q.text}`;
                this.$answers.innerHTML = '';
                q.choices.forEach((c, i) => {
                    const div = document.createElement('div');
                    div.className = 'answer';
                    div.tabIndex = 0;
                    div.textContent = c;
                    div.addEventListener('click', () => this.select(i));
                    div.addEventListener('keydown', (e) => { if (e.key === 'Enter') this.select(i) });

                    if (this.userAnswers[this.index] === i) div.classList.add('selected');

                    this.$answers.appendChild(div);
                });

                const imgEl = document.getElementById('question-image');
                if (q.image) {
                    imgEl.src = q.image;
                    imgEl.style.display = 'block';
                } else {
                    imgEl.src = '';
                    imgEl.style.display = 'none';
                }

                this.updateMeta();
                this.updateButtons();
                this.$resultArea.innerHTML = '';
                this.startTimer();
            }

            select(choiceIndex) {
                this.userAnswers[this.index] = choiceIndex;
                Array.from(this.$answers.children).forEach((el, i) => {
                    el.classList.toggle('selected', i === choiceIndex);
                });

                this.calculateScore();
            }

            calculateScore() {
                let correct = 0;
                this.questions.forEach((q, i) => {
                    if (this.userAnswers[i] === q.answerIndex) correct++;
                });
                this.score = correct;
                this.$points.textContent = `Score: ${this.score}`;
            }

            next() {
                if (this.index < this.questions.length - 1) {
                    this.index++;
                    this.showQuestion();
                } else {
                    this.finish();
                }
            }

            prev() {
                if (this.index > 0) {
                    this.index--;
                    this.showQuestion();
                }
            }

            updateMeta() {
                this.$progress.textContent = `Question ${this.index + 1} of ${this.questions.length}`;
                this.$scoreDisplay.textContent = `Answered: ${this.userAnswers.filter(a => a !== null).length}/${this.questions.length}`;
                this.$points.textContent = `Score: ${this.score}`;
            }

            updateButtons() {
                this.$prevBtn.disabled = this.index === 0;
                this.$nextBtn.textContent = (this.index === this.questions.length - 1) ? 'Finish' : 'Next';
            }

            finish() {
                this.calculateScore();
                this.$resultArea.innerHTML = `<div class="result">Score: ${this.score} / ${this.questions.length}</div>`;
                this.timerElement.textContent = '00:00';
            }
        }

        const sampleQuestions = [
            {
                id: 1,
                text: 'In which country is Zwolle located?',
                choices: ['Germany', 'Belgium', 'Netherlands', 'France'],
                answerIndex: 2,
                image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/2/2f/Map_Netherlands_Zwolle.png/320px-Map_Netherlands_Zwolle.png'
            },
            {
                id: 2,
                text: 'In which country is Split located?',
                choices: ['Italy', 'Croatia', 'Slovenia', 'Greece'],
                answerIndex: 1,
                image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Split_%28Orthophoto%29.png/320px-Split_%28Orthophoto%29.png'
            },
            {
                id: 3,
                text: 'Which sport is most popular in Zwolle?',
                choices: ['Football', 'Basketball', 'Ice hockey', 'Rugby'],
                answerIndex: 0,
                image: ''
            }
        ];

        const root = document.getElementById('quiz-root');
        new Quiz(root, sampleQuestions, { showCorrectOnSubmit: true });
    </script>
</body>

</html>