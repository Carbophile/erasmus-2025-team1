<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>QuizBattle Admin</title>
		<link rel="stylesheet" href="../css/styleQuizCrud.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
		/>
		<style>
			/* Popup overlay */
			.overlay {
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				background: rgba(0, 0, 0, 0.6);
				display: none;
				justify-content: center;
				align-items: center;
				z-index: 1000;
			}

			/* Card */
			.answer-card {
				background: #fff;
				border-radius: 12px;
				padding: 20px;
				width: 350px;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
				animation: fadeIn 0.3s ease-in-out;
			}

			.answer-card h3 {
				margin-top: 0;
				font-size: 18px;
			}

			.options-list {
				list-style: none;
				padding: 0;
				margin: 10px 0;
			}

			.options-list li {
				padding: 8px;
				border: 1px solid #ddd;
				border-radius: 8px;
				margin-bottom: 8px;
			}

			.options-list li.correct {
				background: #d1ffd6;
				border-color: #28a745;
				font-weight: bold;
			}

			.close-btn {
				display: block;
				margin-top: 15px;
				padding: 8px 12px;
				background: #dc3545;
				color: #fff;
				border: none;
				border-radius: 8px;
				cursor: pointer;
				width: 100%;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: scale(0.9);
				}
				to {
					opacity: 1;
					transform: scale(1);
				}
			}
		</style>
	</head>

	<body>
		<aside class="sidebar">
			<div class="logo">QuizBattle</div>
			<nav>
				<a href="/admin/html/users"><i class="fa-solid fa-users"></i><span>Users</span></a>
				<a href="/admin/html/questions" class="active"><i class="fa-solid fa-question"></i><span>Questions</span></a>
			</nav>
		</aside>

		<div class="main">
			<header class="topbar">
				<div class="nav-left">
					<button class="btn">Home</button>
					<button class="btn">Leaderboard</button>
				</div>
				<div class="search-box">
					<input type="text" placeholder="Search..." />
					<i class="fa fa-search"></i>
				</div>
				<div class="nav-right">
					<i class="fa-solid fa-user user-icon"></i>
				</div>
			</header>

			<section class="table-section">
				<div class="table-header">
					<h2>Questions</h2>
					<button class="btn add-btn"><i class="fa fa-plus"></i> Add</button>
				</div>

				<div class="table-container">
					<table>
						<thead>
							<tr>
								<th>Id</th>
								<th>Question</th>
								<th>Options</th>
								<th>Category</th>
								<th>Country</th>
								<th>Quiz Id</th>
								<th>Edit</th>
								<th>Delete</th>
							</tr>
						</thead>
						<tbody id="questions-table-body">
							<!-- Filled by JS -->
						</tbody>
					</table>
				</div>

				<div class="pagination">
					<button>&laquo;</button>
					<button>&lsaquo;</button>
					<button class="active">1</button>
					<button>2</button>
					<button>3</button>
					<button>&rsaquo;</button>
					<button>&raquo;</button>
				</div>
			</section>
		</div>

		<!-- Popup overlay -->
		<div class="overlay" id="overlay">
			<div class="answer-card" id="answer-card">
				<h3>Question</h3>
				<ul class="options-list"></ul>
				<button class="close-btn" onclick="closeCard()">Close</button>
			</div>
		</div>

		<script>
			// Dummy JSON data
			const questions = [
				{
					id: 1,
					question: "What is the capital of the Netherlands?",
					options: ["Amsterdam", "Rotterdam", "The Hague", "Utrecht"],
					correct: "Amsterdam",
					category: "Culture",
					country: "NL",
					quizId: 1,
				},
				{
					id: 2,
					question: "Which planet is known as the Red Planet?",
					options: ["Earth", "Mars", "Venus", "Jupiter"],
					correct: "Mars",
					category: "Science",
					country: "INT",
					quizId: 2,
				},
				{
					id: 3,
					question: "Who wrote 'Romeo and Juliet'?",
					options: ["William Shakespeare", "Mark Twain", "Jane Austen", "Charles Dickens"],
					correct: "William Shakespeare",
					category: "Literature",
					country: "UK",
					quizId: 3,
				},
				{
					id: 4,
					question: "What is the largest ocean on Earth?",
					options: ["Atlantic", "Pacific", "Indian", "Arctic"],
					correct: "Pacific",
					category: "Geography",
					country: "INT",
					quizId: 4,
				}
			];

			const tableBody = document.getElementById("questions-table-body");
			const overlay = document.getElementById("overlay");
			const card = document.getElementById("answer-card");
			const optionsList = card.querySelector(".options-list");

			// Fill table
			questions.forEach(q => {
				const row = document.createElement("tr");

				row.innerHTML = `
					<td>${q.id}</td>
					<td>${q.question}</td>
					<td><button class="btn small" onclick="showCard(${q.id})">Show</button></td>
					<td>${q.category}</td>
					<td>${q.country}</td>
					<td>${q.quizId}</td>
					<td><button class="icon-btn"><i class="fa fa-pen"></i></button></td>
					<td><button class="icon-btn danger"><i class="fa fa-trash"></i></button></td>
				`;

				tableBody.appendChild(row);
			});

			// Show card
			function showCard(id) {
				const q = questions.find(q => q.id === id);
				card.querySelector("h3").textContent = q.question;

				optionsList.innerHTML = "";
				q.options.forEach(opt => {
					const li = document.createElement("li");
					li.textContent = opt;
					if (opt === q.correct) {
						li.classList.add("correct");
					}
					optionsList.appendChild(li);
				});

				overlay.style.display = "flex";
			}

			// Close card
			function closeCard() {
				overlay.style.display = "none";
			}
		</script>
	</body>
</html>
